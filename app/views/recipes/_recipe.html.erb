<%= turbo_frame_tag :recipe, class: "card bg-base-100 shadow-xl" do %>
  <%= turbo_stream.update :flash, partial: "shared/flashes" %>

  <figure>
    <%= image_tag @recipe.image_or_placeholder(
      placeholder_options: {
        width: 900,
        height: 208,
      },
    ),
    class: "h-52 bg-base-100 w-full object-cover" %>
  </figure>
  <div class="card-body">
    <h2 class="card-title group">
      <span><%= @recipe.name %></span>

      <%= link_to(
        edit_recipe_path(@recipe),
        class: "btn btn-ghost btn-xs md:opacity-0 md:group-hover:opacity-100",
        title: "Edit",
          data: { turbo_frame: "modal" },
      ) do %>
        <%= lucide_icon("pencil", class: "h-4 w-4") %>
      <% end %>
      <%= button_to @recipe,
        class: "btn btn-ghost btn-xs md:opacity-0 md:group-hover:opacity-100",
        method: :delete,
        title: "Remove",
        data: {
          turbo_confirm: "Are you sure?",
          turbo_frame: "_top",
        } do %>
        <%= lucide_icon("trash-2", class: "h-4 w-4") %>
      <% end %>
    </h2>
    <div class="mb-4">
      <%= render RecipeCategoryComponent.new(category: @recipe.category) %>
    </div>

    <%= render "ingredients", recipe: @recipe %>

    <% if @recipe.instructions.present? %>
      <hr class="my-3"/>
      <h3 class="text-lg font-semibold">Instructions</h3>
      <%= @recipe.instructions %>
    <% end %>
  </div>
<% end %>
